<!-- ... [keep your existing <head>, styles, and form layout unchanged] ... -->

<script>
  const cart = JSON.parse(localStorage.getItem("cart")) || [];
  const cartSummary = document.getElementById("cart-summary");
  const productInput = document.getElementById("product");
  const priceInput = document.getElementById("price");

  let total = 0;
  let names = [];
  let list = "";

  if (cart.length > 0) {
    cart.forEach(item => {
      const image = item.image || "images/placeholder.png";
      list += `
        <li>
          <img src="${image}" alt="${item.name}" onerror="this.src='images/placeholder.png'" />
          ${item.name} ‚Äì ‚Çπ${item.price}
        </li>`;
      total += Number(item.price);
      names.push(item.name);
    });

    cartSummary.innerHTML = `
      <h3>üõçÔ∏è Order Summary</h3>
      <ul>${list}</ul>
      <p><strong>Total:</strong> ‚Çπ${total}</p>
    `;

    productInput.value = names.join(", ");
    priceInput.value = total;
  } else {
    cartSummary.innerHTML = `<p>Your cart is empty.</p>`;
  }

  document.getElementById("checkoutForm").addEventListener("submit", function(e) {
    e.preventDefault();
    const form = e.target;

    const data = {
      name: form.name.value,
      email: form.email.value,
      address: form.address.value,
      payment: form.payment.value,
      product: form.product.value,
      price: form.price.value
    };

    // Save for thankyou.html
    localStorage.setItem("customerName", form.name.value);
    localStorage.setItem("orderSummary", JSON.stringify(cart));

    fetch("https://script.google.com/macros/s/AKfycbzh2vyxuEx-32iPb3_GkZ69Mq-0Q8cD2ul9sD96o62mNDrR1jRe8w7GC8a6jqVnIZAB/exec", {
      method: "POST",
      body: JSON.stringify(data)
    })
    .then(res => {
      if (!res.ok) throw new Error("Network response was not ok");
      return res.text();
    })
    .then(msg => {
      console.log("‚úÖ Order submitted:", msg);
      form.reset();
      localStorage.removeItem("cart");
      window.location.href = "thankyou.html";
    })
    .catch(err => {
      console.error("‚ùå Order submission failed:", err);
      alert("Something went wrong while placing your order. Please try again.");
    });
  });
</script>
